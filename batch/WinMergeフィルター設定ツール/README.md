# WinMerge フィルター設定ツール

Git管理ファイル（`.gitignore`等）を比較から除外するフィルターをWinMergeに組み込むツールです。

## 概要

WinMergeでフォルダ比較を行う際、`.gitignore`や`.gitkeep`などのGit管理ファイルが差分として表示されることがあります。このツールは、それらのファイルを比較から除外するフィルターをWinMergeに組み込みます。

## 必要な環境

- Windows 10/11
- WinMerge（インストール済み）
- PowerShell 5.1以降（Windows標準搭載）

## ファイル一覧

```
WinMergeフィルター設定ツール/
├── WinMergeフィルター設定ツール.bat  # フィルター組み込みツール
├── GitFiles.flt                       # フィルター定義ファイル
└── README.md                          # このファイル
```

## 使い方

### 自動インストール（推奨）

1. `WinMergeフィルター設定ツール.bat` をダブルクリックで実行
2. フィルターが自動的にWinMergeに組み込まれます
3. WinMergeを起動してフィルター設定を確認

### 手動インストール

1. `GitFiles.flt` を以下のフォルダにコピー：
   ```
   %APPDATA%\WinMerge\Filters\
   ```
   （通常: `C:\Users\ユーザー名\AppData\Roaming\WinMerge\Filters\`）

2. WinMergeを起動
3. メニュー: **ツール** > **フィルター**
4. 「Git管理ファイル除外フィルター」にチェック
5. **OK** をクリック

## 実行例

```
================================================================
  WinMerge フィルター設定ツール
================================================================

[OK] WinMergeが見つかりました
  パス: C:\Program Files\WinMerge\WinMergeU.exe

フィルターファイルを組み込みます...

  [成功] GitFiles.flt を組み込みました

========================================
処理結果:
  組み込み: 1 件
  スキップ: 0 件
  エラー: 0 件
========================================

フィルターの有効化方法:

  1. WinMergeを起動
  2. メニュー: ツール > フィルター
  3. 「Git管理ファイル除外フィルター」にチェック
  4. OK をクリック

WinMergeを起動してフィルター設定を確認しますか？ (y/n):
```

## フィルター内容

### GitFiles.flt

以下のファイル/フォルダが比較から除外されます：

| 種類 | パターン | 説明 |
|------|----------|------|
| ファイル | `.gitignore` | Git除外設定ファイル |
| ファイル | `.gitkeep` | 空フォルダ保持用ファイル |
| ファイル | `.gitattributes` | Git属性設定ファイル |
| ファイル | `.gitmodules` | サブモジュール設定ファイル |
| フォルダ | `.git` | Gitリポジトリフォルダ |

### フィルターファイルの内容

```
## This is a directory/file filter for WinMerge
name: Git管理ファイル除外フィルター
desc: .gitignore, .gitkeep, .gitattributes などのGit管理ファイルを比較から除外します

## ファイルフィルター
f: \.gitignore$
f: \.gitkeep$
f: \.gitattributes$
f: \.gitmodules$

## フォルダフィルター
d: \\\.git$
```

## カスタマイズ

### 除外ファイルの追加

`GitFiles.flt` をテキストエディタで開き、以下の形式で行を追加：

```
## ファイルを除外
f: \.ファイル名$

## フォルダを除外
d: \\フォルダ名$
```

### 例: node_modules も除外

```
## Node.js
d: \\node_modules$
```

## WinMergeでのフィルター使用

### フォルダ比較時

1. WinMergeを起動
2. **ファイル** > **開く** または **Ctrl+O**
3. 比較するフォルダを選択
4. **フォルダー: フィルター** で「Git管理ファイル除外フィルター」を選択
5. **比較** をクリック

### デフォルトフィルターとして設定

1. **ツール** > **フィルター**
2. 使用したいフィルターにチェック
3. **OK** をクリック

以降、フォルダ比較時に自動的にフィルターが適用されます。

## 注意事項

- フィルターはフォルダ比較時のみ有効です（ファイル比較では適用されません）
- 既存のフィルターファイルがある場合、上書き確認が表示されます
- WinMergeを再起動するとフィルター設定が反映されます

## トラブルシューティング

### フィルターが表示されない

1. WinMergeを再起動
2. **ツール** > **フィルター** で一覧を確認
3. フィルターファイルが正しい場所にあるか確認：
   ```
   %APPDATA%\WinMerge\Filters\GitFiles.flt
   ```

### フィルターが適用されない

1. フォルダ比較画面で **フォルダー: フィルター** を確認
2. 正しいフィルターが選択されているか確認
3. フィルターのチェックボックスが有効になっているか確認

## ライセンス

MIT License
