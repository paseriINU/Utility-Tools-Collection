# JP1ジョブネット起動ツール

ローカルPCから**JP1/AJS3のジョブネット**を起動するためのツール群です。

2つの異なるアプローチで実装されており、環境に応じて選択できます。

---

## 📁 フォルダ構成

```
jp1-job-executor/
├── remote-exec/                   # 方法1: リモート実行版
│   ├── jp1_remote_start.bat       # リモート実行版（スタンドアローン）
│   └── README.md
│
└── rest-api/                      # 方法2: REST API版
    ├── Start-JP1Job-Standalone.bat # REST API版（スタンドアローン）
    └── README.md
```

---

## 🚀 2つのアプローチ

### 方法1: リモート実行版

**特徴**:
- ✅ PowerShell Remotingを使用してリモートサーバで`ajsentry`を実行
- ✅ ローカルにJP1のインストール不要
- ✅ 既存のリモート実行ツールと同じ仕組み

**使用条件**:
- JP1サーバ上でPowerShell Remotingが有効
- WinRMサービスが稼働
- リモートサーバへのアクセス権限

**詳細**: [remote-exec/README.md](remote-exec/README.md)

---

### 方法2: REST API版（最新）

**特徴**:
- ✅ JP1/AJS3のREST APIを使用
- ✅ ローカルにJP1のインストール不要
- ✅ HTTP/HTTPSで通信（ファイアウォール設定が簡単）
- ⚠️ JP1/AJS3 - Manager バージョン10以降が必要

**使用条件**:
- JP1/AJS3 - Manager バージョン10以降
- REST APIサービスが有効
- ネットワークでポート22250（デフォルト）が開いている

**詳細**: [rest-api/README.md](rest-api/README.md)

---

## 📊 比較表

| 項目 | リモート実行版 | REST API版 |
|------|---------------|-----------|
| **ローカルJP1必要** | ❌ 不要 | ❌ 不要 |
| **セットアップ難易度** | ⭐⭐ 中程度 | ⭐⭐ 中程度 |
| **JP1バージョン要件** | すべて | 10以降 |
| **通信プロトコル** | WinRM (5985/5986) | HTTP/HTTPS (22250) |
| **認証方法** | Windows認証+JP1認証 | JP1認証 |
| **ファイアウォール設定** | WinRM | HTTP/HTTPS |
| **推奨用途** | JP1未インストールPC | モダンな環境 |

---

## 🎯 どれを選ぶべきか？

### リモート実行版を選ぶ場合:
- ✅ ローカルにJP1をインストールできない
- ✅ PowerShell Remotingが既に設定済み
- ✅ 複数のサーバで実行する可能性がある
- ✅ JP1のバージョンに関係なく使いたい

### REST API版を選ぶ場合:
- ✅ JP1/AJS3 - Manager バージョン10以降を使用
- ✅ モダンなAPI連携をしたい
- ✅ ファイアウォール設定を簡素化したい
- ✅ 将来的に他のシステムとの連携を考えている

---

## 🔧 共通の前提条件

すべてのアプローチに共通する要件:

1. **JP1/AJS3サーバが稼働中**
   - ジョブネットが登録済み
   - JP1サービスが起動中

2. **ネットワーク接続**
   - ローカルPCからJP1サーバへアクセス可能

3. **JP1認証情報**
   - JP1ユーザー名とパスワード
   - ジョブネット実行権限

4. **ジョブネット情報**
   - ジョブネットのフルパス（例: `/main_unit/jobgroup1/daily_batch`）

---

## 📖 使い方

各アプローチの詳細な使い方は、それぞれのフォルダ内のREADME.mdを参照してください。

1. **リモート実行版**: [remote-exec/README.md](remote-exec/README.md)
2. **REST API版**: [rest-api/README.md](rest-api/README.md)

---

## ⚠️ 注意事項

### セキュリティ

- **パスワード管理**: バッチファイル内にパスワードを直接記載しないことを推奨（実行時入力を推奨）
- **設定ファイル**: スタンドアローン版ではバッチファイル内に設定を記述
- **権限管理**: ジョブネット実行権限を持つユーザーのみが使用すること

### JP1環境

- **本番環境**: 本番環境での実行前に必ずテスト環境で動作確認
- **ジョブネット状態**: 既に実行中のジョブネットを再起動する場合は注意
- **スケジュール**: 定期実行されているジョブネットとの競合に注意

---

## 🐛 トラブルシューティング

### 共通のエラー

#### エラー: 「認証に失敗しました」
- JP1ユーザー名、パスワードを確認
- JP1サーバが稼働中か確認
- ネットワーク接続を確認

#### エラー: 「ジョブネットが見つかりません」
- ジョブネットパスが正しいか確認（例: `/main_unit/group/jobnet`）
- ジョブネットが登録されているか確認
- パスの大文字小文字を確認

#### エラー: 「接続できません」
- ファイアウォール設定を確認
- JP1サービスが起動しているか確認
- ホスト名/IPアドレスが正しいか確認

詳細なトラブルシューティングは各アプローチのREADME.mdを参照してください。

---

## 📝 ライセンス

このツールはMITライセンスで提供されています。詳細はリポジトリルートの[LICENSE](../../LICENSE)ファイルを参照してください。

---

**更新日**: 2025-12-02
