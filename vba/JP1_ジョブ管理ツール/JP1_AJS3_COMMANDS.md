# JP1/AJS3 コマンドリファレンス

JP1/AJS3（Job Management Partner 1 / Automatic Job Management System 3）で使用可能なコマンドの一覧と説明です。
初心者の方でもわかりやすいように、実行例やオプションの詳細を記載しています。

---

## はじめに - JP1/AJS3とは

### JP1/AJS3の概要

JP1/AJS3（Automatic Job Management System 3）は、日立製作所が提供する**ジョブ管理システム**です。
バッチ処理やスクリプトの実行を自動化し、スケジュール管理や監視を行います。

### 主な機能

| 機能 | 説明 |
|------|------|
| **スケジュール実行** | 指定した日時にジョブを自動実行 |
| **依存関係管理** | ジョブ間の実行順序を制御 |
| **監視・通知** | 実行状態を監視し、異常時に通知 |
| **リカバリー** | 異常終了時の再実行や回復処理 |

### 基本用語

| 用語 | 説明 |
|------|------|
| **ユニット** | ジョブ、ジョブネット、ジョブグループの総称 |
| **ジョブ** | 実行する処理の最小単位（バッチファイル、スクリプトなど） |
| **ジョブネット** | ジョブをまとめて順序や条件を設定したもの |
| **ジョブグループ** | ジョブネットをフォルダのようにまとめたもの |
| **スケジューラーサービス** | ジョブを管理するサービス（デフォルト: AJSROOT1） |
| **実行登録** | ジョブネットを実行可能な状態にすること |
| **保留** | ジョブの実行を一時的に止めること |

---

## 目次

1. [コマンド一覧（カテゴリ別）](#コマンド一覧カテゴリ別)
2. [ジョブネット操作コマンド](#ジョブネット操作コマンド)
3. [情報取得コマンド](#情報取得コマンド)
4. [ジョブ実行結果取得コマンド](#ジョブ実行結果取得コマンド)
5. [定義操作コマンド](#定義操作コマンド)
6. [スケジュール管理コマンド](#スケジュール管理コマンド)
7. [システム管理コマンド](#システム管理コマンド)
8. [ユニットタイプ一覧](#ユニットタイプ一覧)
9. [実行状態一覧](#実行状態一覧)
10. [共通オプション](#共通オプション)
11. [よく使うコマンド例](#よく使うコマンド例)
12. [トラブルシューティング](#トラブルシューティング)
13. [コマンドの配置場所](#コマンドの配置場所)
14. [エラーメッセージ](#エラーメッセージ)

---

## コマンド一覧（カテゴリ別）

### ジョブネット操作

| コマンド | 説明 | 使用頻度 |
|----------|------|----------|
| `ajsentry` | ジョブネットを即時実行 | ★★★ |
| `ajsrelease` | 保留を解除 | ★★★ |
| `ajspend` | 保留を設定 | ★★☆ |
| `ajskilljob` | ジョブを強制終了 | ★★☆ |
| `ajsrerun` | ジョブネットを再実行 | ★★☆ |
| `ajssuspend` | 実行を一時停止 | ★☆☆ |
| `ajsresume` | 一時停止を解除 | ★☆☆ |
| `ajschgstat` | 実行状態を変更 | ★★☆ |
| `ajsintrpt` | 実行を中断 | ★☆☆ |
| `ajsleave` | 実行登録を解除 | ★☆☆ |
| `ajsplan` | 実行登録（スケジュール登録） | ★★☆ |

### 情報取得

| コマンド | 説明 | 使用頻度 |
|----------|------|----------|
| `ajsprint` | 定義情報を出力 | ★★★ |
| `ajsstatus` | 実行状態を取得 | ★★★ |
| `ajsshow` | 詳細情報を取得 | ★★★ |
| `ajsname` | 名前を解決 | ★☆☆ |
| `ajslogprint` | ログ情報を出力 | ★★☆ |
| `jpqjobget` | ジョブの実行結果を取得（**QUEUEジョブ専用**） | ★☆☆ |
| `jpqjobshow` | ジョブの詳細情報を表示 | ★★☆ |

### 定義操作

| コマンド | 説明 | 使用頻度 |
|----------|------|----------|
| `ajsdefine` | ジョブネットを定義・登録 | ★★☆ |
| `ajsdelete` | ジョブネットを削除 | ★☆☆ |
| `ajsimport` | 定義をインポート | ★★☆ |
| `ajsexport` | 定義をエクスポート | ★★☆ |
| `ajscopy` | 定義をコピー | ★☆☆ |
| `ajschgdef` | 定義を変更 | ★★☆ |
| `ajsbackup` | 定義をバックアップ | ★☆☆ |
| `ajsrestore` | 定義をリストア | ★☆☆ |

### スケジュール管理

| コマンド | 説明 | 使用頻度 |
|----------|------|----------|
| `ajsplan` | 実行予定を表示 | ★★☆ |
| `ajscalendar` | カレンダーを管理 | ★☆☆ |
| `ajsschedule` | スケジュールを管理 | ★☆☆ |

### システム管理

| コマンド | 説明 | 使用頻度 |
|----------|------|----------|
| `ajsstart` | JP1/AJS3サービスを起動 | ★☆☆ |
| `ajsstop` | JP1/AJS3サービスを停止 | ★☆☆ |
| `ajsstatus` | サービス状態を確認 | ★★☆ |
| `ajsagtadd` | エージェントを追加 | ★☆☆ |
| `ajsagtdel` | エージェントを削除 | ★☆☆ |
| `ajsagtshow` | エージェント情報を表示 | ★☆☆ |

---

## ジョブネット操作コマンド

### ajsentry（実行登録）

定義済みのジョブネットを実行登録するコマンドです。
**最もよく使うコマンドの一つです。**

> ⚠️ **重要**: オプションを指定しない場合、`-s`オプション（計画実行登録）が仮定されます。
> **即時実行するには`-n`オプションの指定が必須です。**

```cmd
ajsentry [-F サービス名]
         [{-s|-n|-f|-d[[年/]月/]日 -t 時[:分]|-p 予定情報ファイル名}]
         [-g 未来予定世代数] [-o] [-w]
         [-c マクロ変数指定]... [-R] [-L] [-T]
         [-m {時:分|M分|unlimited} -k {回数|unlimited}]
         ジョブネット名，またはジョブグループ名...
```

**実行登録の種類**:

| 種類 | オプション | 説明 |
|------|-----------|------|
| **計画実行登録** | `-s`（デフォルト） | スケジュールに従って実行。実行予定時刻を過ぎていても実行する |
| **即時実行登録** | `-n` | スケジュールを無効にして**すぐに実行** |
| **計画実行登録** | `-f` | 次回のスケジュールに従って実行。実行予定時刻が過ぎている場合は実行しない |
| **確定実行登録** | `-d 日付 -t 時刻` | 指定した日時に実行 |
| **確定実行登録** | `-p ファイル名` | 予定情報ファイルに従って実行 |

**主なオプション**:

| オプション | 説明 | 同時指定不可 |
|-----------|------|-------------|
| `-F サービス名` | スケジューラーサービスを指定（1～30バイト） | - |
| `-s` | 計画実行登録（スケジュールに従う）**※デフォルト** | -n,-f,-d,-t,-p,-g,-w,-m,-k |
| `-n` | **即時実行登録**（すぐに実行） | -s,-f,-d,-t,-p,-g,-o |
| `-f` | 計画実行登録（次回スケジュール） | -s,-n,-d,-t,-p,-g,-w,-m,-k |
| `-d [[年/]月/]日` | 確定実行登録の日付指定（-tと同時指定必須） | -s,-n,-f,-p,-g,-w,-m,-k |
| `-t 時[:分]` | 確定実行登録の時刻指定（-dと同時指定必須） | -s,-n,-f,-p,-g,-w,-m,-k |
| `-p ファイル名` | 予定情報ファイルで確定実行登録 | -s,-n,-f,-d,-t,-w,-m,-k |
| `-g 世代数` | 未来予定世代数（1～99） | -s,-n,-f,-d,-t,-w,-m,-k |
| `-o` | 実行開始予定時間が過ぎたジョブネットは実行しない | -n |
| `-w` | 実行完了まで待機（**-nと同時指定必須**） | -m,-k |
| `-c マクロ変数` | マクロ変数を設定（最大32個） | - |
| `-R` | 配下のすべてのジョブネットを実行登録 | - |
| `-L` | 実行登録していないジョブネットだけを実行登録 | - |
| `-T` | ルートジョブネットだけを実行登録 | - |
| `-m 時間` | 起動条件の成立待ち時間（-n,-kと同時指定必須） | -w |
| `-k 回数` | 起動条件の成立待ち回数（-n,-mと同時指定必須） | -w |

**-wオプションの注意事項**:
- **`-n`オプションと同時に指定すること**（必須）
- `-m`、`-k`オプションとは同時に指定できない
- ルートジョブネットを即時実行登録する場合にだけ指定
- 保留や計画一時変更する場合には指定できない
- 同時に実行できるジョブネット数は**50個まで**
- 以下の場合はジョブ完了を待たずにコマンドが終了する：
  - ジョブネット実行中にサービスが停止した場合
  - 終了待ちを指定した世代が繰り越し未実行になった場合
  - 終了待ちを指定した世代が削除された場合
  - 終了待ちを指定した世代が未計画になった場合
- **-wオプション指定時、ajsentryの戻り値でジョブネットの実行結果は取得できない**（別途ajsshowで取得）

**実行例**:
```cmd
rem 計画実行登録（スケジュールに従って実行）※デフォルト
ajsentry -s /net1
ajsentry /net1              rem -sは省略可能

rem 即時実行登録（すぐに実行）
ajsentry -n /net1

rem 即時実行登録＋完了待ち
ajsentry -n -w /net1

rem 即時実行登録＋マクロ変数指定
ajsentry -n -c AJS2ENV:/tmp/unit_data /net1

rem 確定実行登録（特定日時に実行）
ajsentry -d 2007/02/01 -t 20 /net1

rem 確定実行登録（予定情報ファイル使用）
ajsentry -p 予定情報ファイル名 /net1
```

**戻り値**:
| 値 | 説明 |
|----|------|
| `0` | 正常終了 |
| `1～3` または `4～124で4の倍数値` | 異常終了 |

**注意事項**:
- スケジューラーサービスが起動していない場合、コマンドは異常終了する
- 即時実行登録は、すでに即時実行登録済みでも再度実行登録できる
- ジョブネット名にはルートジョブネット名だけ指定可能
- マネージャージョブグループ名・マネージャージョブネット名は指定不可

**正常終了時メッセージ**:
```
KAVS1820-I ajsentryコマンドが正常終了しました。
```

---

### ajsrelease（保留解除）

保留中のジョブネットやジョブの保留を解除するコマンドです。

```cmd
ajsrelease [オプション] ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-h ホスト名` | JP1/AJS3マネージャーのホスト名を指定 |
| `-u ユーザー名` | JP1ユーザー名を指定 |
| `-p パスワード` | JP1パスワードを指定 |
| `-R` | 配下のユニットも再帰的に保留解除 |
| `-B 実行ID:世代番号` | 対象の実行世代を指定 |

**実行例**:
```cmd
rem 単一ジョブネットの保留解除
ajsrelease -F AJSROOT1 /main_unit/jobgroup1/weekly_batch

rem 配下のユニットも含めて保留解除
ajsrelease -F AJSROOT1 -R /main_unit/jobgroup1
```

**正常終了時メッセージ**:
```
KAVS1820-I ajsreleaseコマンドが正常終了しました。
```

---

### ajspend（保留設定）

ジョブネットやジョブに保留を設定するコマンドです。

```cmd
ajspend [オプション] ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-h ホスト名` | JP1/AJS3マネージャーのホスト名を指定 |
| `-u ユーザー名` | JP1ユーザー名を指定 |
| `-p パスワード` | JP1パスワードを指定 |
| `-R` | 配下のユニットも再帰的に保留設定 |

**実行例**:
```cmd
rem 保留設定
ajspend -F AJSROOT1 /main_unit/jobgroup1/weekly_batch
```

---

### ajskilljob（強制終了）

実行中のジョブを強制終了するコマンドです。

```cmd
ajskilljob [オプション] ジョブパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-h ホスト名` | JP1/AJS3マネージャーのホスト名を指定 |
| `-u ユーザー名` | JP1ユーザー名を指定 |
| `-p パスワード` | JP1パスワードを指定 |
| `-f` | 強制終了（確認なし） |

**実行例**:
```cmd
rem ジョブを強制終了
ajskilljob -F AJSROOT1 /main_unit/jobgroup1/daily_batch/job1
```

---

### ajsrerun（再実行）

異常終了したジョブネットやジョブを再実行するコマンドです。

```cmd
ajsrerun [オプション] ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-h ホスト名` | JP1/AJS3マネージャーのホスト名を指定 |
| `-u ユーザー名` | JP1ユーザー名を指定 |
| `-p パスワード` | JP1パスワードを指定 |
| `-b ユニットパス` | 再実行開始位置を指定 |
| `-B 実行ID:世代番号` | 対象の実行世代を指定 |

**実行例**:
```cmd
rem ジョブネット全体を再実行
ajsrerun -F AJSROOT1 /main_unit/jobgroup1/daily_batch

rem 特定のジョブから再実行
ajsrerun -F AJSROOT1 -b /main_unit/jobgroup1/daily_batch/job3 /main_unit/jobgroup1/daily_batch
```

---

### ajssuspend（一時停止）

実行中のジョブネットを一時停止するコマンドです。

```cmd
ajssuspend [オプション] ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-h ホスト名` | JP1/AJS3マネージャーのホスト名を指定 |

**実行例**:
```cmd
ajssuspend -F AJSROOT1 /main_unit/jobgroup1/daily_batch
```

---

### ajsresume（一時停止解除）

一時停止中のジョブネットの実行を再開するコマンドです。

```cmd
ajsresume [オプション] ジョブネットパス
```

**実行例**:
```cmd
ajsresume -F AJSROOT1 /main_unit/jobgroup1/daily_batch
```

---

### ajschgstat（状態変更）

ジョブネットやジョブの実行状態を変更するコマンドです。

```cmd
ajschgstat [オプション] -s 状態 ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-s 状態` | 変更後の状態（下記参照） |
| `-B 実行ID:世代番号` | 対象の実行世代を指定 |

**状態の指定値**:

| 指定値 | 状態 |
|--------|------|
| `N` | 正常終了 |
| `W` | 警告終了 |
| `A` | 異常終了 |
| `K` | 強制終了 |
| `U` | 状態不明 |

**実行例**:
```cmd
rem 異常終了を正常終了に変更
ajschgstat -F AJSROOT1 -s N /main_unit/jobgroup1/daily_batch/job1
```

---

### ajsintrpt（中断）

実行中のジョブネットを中断するコマンドです。

```cmd
ajsintrpt [オプション] ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-k` | 強制中断（実行中のジョブも終了） |

**実行例**:
```cmd
rem 中断（実行中のジョブ完了後）
ajsintrpt -F AJSROOT1 /main_unit/jobgroup1/daily_batch

rem 強制中断
ajsintrpt -F AJSROOT1 -k /main_unit/jobgroup1/daily_batch
```

---

### ajsleave（実行登録解除）

ジョブネットの実行登録を解除するコマンドです。

```cmd
ajsleave [オプション] ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-B 実行ID:世代番号` | 対象の実行世代を指定 |

**実行例**:
```cmd
ajsleave -F AJSROOT1 /main_unit/jobgroup1/daily_batch
```

---

## 情報取得コマンド

### ajsprint（定義情報出力）

ジョブネットの定義情報を出力するコマンドです。ジョブ一覧の取得に使用します。

```cmd
ajsprint [オプション] ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-R` | 再帰的にサブユニットも取得 |
| `-a` | すべての属性を出力 |
| `-l` | 長い形式で出力 |
| `-p オプション` | 出力フォーマットを指定 |

**実行例**:
```cmd
rem 全ジョブネットを再帰的に取得
ajsprint -F AJSROOT1 / -R

rem 特定グループ配下を取得
ajsprint -F AJSROOT1 /main_unit/jobgroup1 -R
```

**出力形式**:
```
unit=/main_unit/jobgroup1/daily_batch,daily_batch,ty=n,cm="日次バッチ処理";
unit=/main_unit/jobgroup1/weekly_batch,weekly_batch,ty=n,hd=y,cm="週次バッチ処理";
```

**出力フィールド**:

| フィールド | 説明 |
|-----------|------|
| `unit=` | ジョブネットのフルパス |
| `ty=n` | ユニットタイプ（n=ジョブネット、j=ジョブ、g=グループ） |
| `hd=y` | 保留状態（y=保留中） |
| `cm=` | コメント |
| `ex=` | 実行ホスト |
| `sc=` | スクリプトファイル |

---

### ajsstatus（実行状態取得）

ジョブネットの実行状態を取得するコマンドです。

```cmd
ajsstatus [オプション] ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-h ホスト名` | JP1/AJS3マネージャーのホスト名を指定 |
| `-u ユーザー名` | JP1ユーザー名を指定 |
| `-p パスワード` | JP1パスワードを指定 |
| `-l` | 詳細形式で出力 |

**実行例**:
```cmd
ajsstatus -F AJSROOT1 /main_unit/jobgroup1/daily_batch
```

---

### ajsshow（詳細情報取得）

ジョブネットやジョブの実行結果情報、次回の実行予定情報を参照するコマンドです。
**非常に多機能で、様々な情報を取得できます。**

```cmd
ajsshow [-F スケジューラーサービス名]
        [-B 実行登録番号]
        [-g {世代番号|a}]
        [-b [[年/]月/]日] [-e [[年/]月/]日]
        [-v [[年/]月/]日] [-w [[年/]月/]日]
        [-d [[年/]月/]日] [-h 時[:分]]
        [-t タイトル用フォーマット]
        {-s|-p|-l|-r|-f フォーマット|-i フォーマット|-xw}
        [-R{E|N}] [-T] [-U]
        [-X {yes|no}]
        ユニット名
```

**必要な実行権限**:
- JP1_AJS_Admin権限
- JP1_AJS_Manager権限
- JP1_AJS_Operator権限
- JP1_AJS_Guest権限

**主なオプション**:

| オプション | 説明 | 同時指定不可 |
|-----------|------|-------------|
| `-F サービス名` | スケジューラーサービスを指定（1～30バイト） | - |
| `-B 実行登録番号` | 実行登録番号で世代を指定（YYYYMMDDNNN形式）。**-f/-i/-r/-xwのいずれかと同時指定必須** | -g,-b,-e,-v,-w,-d,-h,-s,-p,-l,-T,-X |
| `-g 世代番号` | 取得する世代を指定（1=最新、a=全世代） | -B,-b,-e,-d,-h,-X |
| `-b [[年/]月/]日` | 開始暦日を指定（-eと同時指定必須） | -B,-g,-v,-w,-d,-h,-T |
| `-e [[年/]月/]日` | 終了暦日を指定（-bと同時指定必須） | -B,-g,-v,-w,-d,-h,-T |
| `-v [[年/]月/]日` | 開始実行日を指定（-wと同時指定必須） | -B,-b,-e,-d,-h,-T |
| `-w [[年/]月/]日` | 終了実行日を指定（-vと同時指定必須） | -B,-b,-e,-d,-h,-T |
| `-d [[年/]月/]日` | 推定所要時間の算出開始日を指定 | -B,-g,-b,-e,-v,-w |
| `-h 時[:分]` | 推定所要時間の算出開始時刻を指定（-dと同時指定） | -B,-g,-b,-e,-v,-w |
| `-t フォーマット` | タイトル行の出力フォーマットを指定 | -s,-p,-l,-r,-xw |
| `-s` | 簡易形式で出力 | -p,-l,-f,-i,-r,-xw,-t,-T |
| `-p` | 標準形式で出力 | -s,-l,-f,-i,-r,-xw,-t,-T |
| `-l` | 詳細形式で出力 | -s,-p,-f,-i,-r,-xw,-t,-T |
| `-r` | 標準エラー出力ファイル名を出力 | -s,-p,-l,-f,-i,-xw,-t,-T |
| `-f フォーマット` | **1バイト版**フォーマット指示子で実行結果情報を出力（%J, %C, %R等） | -s,-p,-l,-i,-r,-xw,-T |
| `-i フォーマット` | **2バイト版**フォーマット指示子で結果出力（%JJ, %CC, %RR等）。出力がシングルクォートで囲まれる | -s,-p,-l,-f,-r,-xw,-T |
| `-xw` | 待ち合わせ条件を出力 | -s,-p,-l,-f,-i,-r,-t,-T |
| `-R{E|N}` | 配下のユニットも再帰的に取得（E:全て、N:ネットのみ） | - |
| `-T` | ルートジョブネットの情報のみ出力 | -B,-b,-e,-v,-w,-s,-p,-l,-xw |
| `-U` | ユーザーマッピングなしでリモート接続 | - |
| `-X {yes|no}` | プランニンググループの自動選択（yes:する/no:しない） | -B,-g |

**-Bオプションの注意事項**:
- **`-f`、`-i`、`-r`、`-xw`オプションのいずれかと同時に指定すること**（必須）
- `-s`、`-p`、`-l`オプションとは同時に指定できない
- 実行登録番号はYYYYMMDDNNN形式（例: 20090701001）

**フォーマット指示子（-f/-i オプション）**:

> 参考: [公式ドキュメント](https://itpfdoc.hitachi.co.jp/manuals/3021/30213L4920/AJSO0131.HTM)

> ⚠️ **-fと-iオプションの違い（重要）**
>
> | オプション | フォーマット指示子 | 出力形式 |
> |-----------|------------------|---------|
> | `-f` | **1バイト版**（%J, %C, %R等） | そのまま出力 |
> | `-i` | **2バイト版**（%JJ, %CC, %RR等） | シングルクォートで囲まれて出力 |
>
> **`-i`オプション使用時の注意点**:
> - フォーマット指示子は `%` と **2バイトの英字** で指定する（例: `%JJ`, `%CC`, `%RR`）
> - `"（ダブルクォーテーション）`で囲んだフォーマット指示子以外の文字は、指定したとおりに出力される
> - 出力値がシングルクォートで囲まれる
>
> **実行例**:
> ```cmd
> rem -iオプション（2バイト版）
> ajsshow -i %rr /net/job1
> 出力: '/var/opt/jp1ajs2/jobinf/e/67/0.e.err'
>
> rem -fオプション（1バイト版）
> ajsshow -f "%J %C %R" /net
> 出力: /net 正常終了 ***
> ```

**表2-16　情報取得フォーマット指示子（実行結果情報）**:

| 1バイト版（-f用） | 2バイト版（-i用） | 説明 |
|-----------------|-----------------|------|
| `%j` | - | ユニット名 |
| `%J` | `%JJ` | ユニット完全名 |
| `%C` | `%CC` | 状態（日本語文字列） |
| `%#` | `%##` | 実行ID |
| `%G` | - | 世代番号 |
| `%l` | `%ll` | 実行登録番号（YYYYMMDDNNN形式） |
| `%S` | - | 実行開始日時 |
| `%E` | - | 実行終了日時 |
| `%R` | `%RR` | 戻り値（ジョブネットは`***`） |
| `%I` | `%II` | ジョブ番号（UNIXジョブのみ有効） |
| `%a` | - | 実行所要時間（hh:mm:ss形式） |
| `%ab` | - | 推定所要時間（-v,-wまたは-d,-hと併用） |
| `%an` | - | 実行所要時間（-RNと併用してネストジョブネット表示） |
| `%T` | `%TT` | ユニット種別 |
| - | `%so` | **標準出力ファイル名**（PCジョブ/UNIXジョブで使用） |
| `%r` | `%rr` | 標準エラー出力ファイル名 |
| `%Y` | - | 保留予定 |
| `%H` | - | 保留種別 |
| `%D` | - | 実行登録時刻 |
| `%K` | - | 実行開始時刻（変更後の一時変更値） |
| `%V` | - | 次回実行予定日時（変更後の一時変更値） |
| `%Q` | - | 実行登録方法 |
| `%O` | - | 処理サイクル終了予定日時 |
| `%B` | - | 実行開始予定日時 |
| `%M` | - | 計画を一時変更した予定情報 |
| `%MV` | - | マクロ変数（引き継ぎ情報/引き継ぎ結果情報） |
| `%ex` | - | 実行ホスト名 |
| `%sc` | - | スクリプトファイル名 |
| `%prm` | - | パラメータ |
| `%env` | - | 環境変数ファイル名 |
| `%wkp` | - | 作業用パス名 |

**表2-17　情報取得フォーマット指示子（その他）**:

| 指示子 | 説明 |
|--------|------|
| `%OP` | 実行日 |
| `%ds` | スケジュール開始日 |
| `%de` | スケジュール終了日 |
| `%St` | スケジュールの開始時刻 |
| `%Pt` | スケジュールの次回予定時刻 |
| `%st` | スケジュールの実行開始時刻（秒単位） |
| `%p` | 次回予定（分単位） |
| `%P` | 次回予定日時（分単位） |
| `%m` | 次回予定時刻（分単位） |
| `%s` | 実行開始日時（秒単位） |
| `%e` | 実行終了日時（秒単位） |
| `%k` | 実行開始時刻（一時変更後、秒単位） |
| `%b` | 実行開始予定日時（秒単位） |
| `%o` | 処理サイクル終了予定日時（秒単位） |
| `%v` | 次回予定日時（一時変更後、秒単位） |
| `%w` | 起動条件監視終了日時（秒単位） |

**表2-18　その他のフォーマット指示子**:

| 指示子 | 説明 |
|--------|------|
| `%%` | ％記号 |
| `%n` | 改行文字 |
| `%t` | タブ文字 |
| `%x` | 現在の日（コマンド実行開始日時） |
| `%X` | 現在の時刻（コマンド実行開始日時） |

**表2-19　日時出力形式**:

| フォーマット指示子 | 日本語出力形式 | 英語出力形式 |
|------------------|----------------|--------------|
| `%D`,`%P`,`%S`,`%E`等 | YYYY/MM/DD hh:mm（例: 2009/07/01 12:30） | MMM DD YYYY hh:mm（例: Jul 1 2009 12:30） |
| `%s`,`%e`,`%b`,`%o`等 | YYYY/MM/DD hh:mm:ss（例: 2009/07/01 12:30:00） | MMM DD YYYY hh:mm:ss（例: Jul 1 2009 12:30:00） |
| `%x`,`%OP` | YYYY/MM/DD（例: 2009/07/01） | MMM DD YYYY（例: Jul 1 2009） |
| `%X`,`%a`,`%ab`,`%an` | hh:mm:ss（例: 12:30:30） | hh:mm:ss（例: 12:30:30） |
| `%l` | YYYYMMDDNNN（例: 20090701001） | YYYYMMDDNNN（例: 20090701001） |

**%CC（状態）の出力値**:

`%CC`はジョブネット/ジョブの状態を**日本語文字列**で返します（1文字コードではありません）。

| 出力文字列 | 説明 |
|-----------|------|
| `正常終了` | ジョブ/ジョブネットが正常に終了 |
| `異常終了` | ジョブ/ジョブネットがエラーで終了 |
| `強制終了` | ジョブ/ジョブネットが強制的に終了された |
| `警告検出終了` | 警告付きで終了 |
| `中断` | ジョブネットが中断された |
| `実行中` | 現在実行中 |
| `起動条件待ち` | 起動条件の成立を待機中 |
| `先行終了待ち` | 先行ジョブの終了を待機中 |
| `開始時刻待ち` | 開始時刻になるまで待機中 |
| `保留中` | 保留状態 |
| `未実行終了` | 実行されずに終了 |
| `未計画` | 実行予定なし |
| `監視中` | 起動条件を監視中（起動条件付きジョブネット） |

**%RR（戻り値）の注意点**:

- **ジョブ**: 実終了コード（数値）が返される（例: `0`, `1`, `255`）
- **ジョブネット**: 実終了コードは存在しないため`***`が返される
- ジョブネットの状態を確認するには`%CC`を使用すること

**実行例**:
```cmd
rem === -fオプション（1バイト版フォーマット指示子）===

rem 実行結果の詳細を取得（詳細形式）
ajsshow -l /net1

rem 定義情報を取得（1バイト版、複数指定はダブルクォートで囲む）
ajsshow -f "%J %S %E" -g 2 -RE /group1

rem 配下のユニットも含めて状態取得（1バイト版）
ajsshow -RE -f "%J %T %C %R" /main_unit/jobgroup1

rem 期間を指定して実行予定を取得（1バイト版）
ajsshow -b 2009/7/1 -e 2009/7/31 -f "%j %G %B" /net

rem === -iオプション（2バイト版フォーマット指示子）===

rem 標準出力ファイルパスを取得（2バイト版、実行登録番号で指定）
ajsshow -B 20090701001 -i %so /net/job1

rem 実行登録番号を取得（2バイト版）
ajsshow -g 1 -i "%ll" /net1

rem 配下のユニットも含めて状態取得（2バイト版）
ajsshow -RE -i "%JJ %TT %CC %RR" /main_unit/jobgroup1

rem === その他のオプション ===

rem 標準エラー出力ファイルパスを取得（-rオプション）
ajsshow -B 20090701001 -r /net/job1

rem 最新の実行結果を取得
ajsshow -g 1 /main_unit/jobgroup1/daily_batch

rem ルートジョブネットの実行結果のみ
ajsshow -g a -T /main_unit/jobgroup1/daily_batch
```

**出力例（-lオプション）**:
```
AJSPATH=/main_unit/jobgroup1/
名称             : daily_batch
種別             : net
状態             : 正常終了
次回実行予定     : あり
登録者           : jp1admin
登録日時         : 2025/12/17 10:00
次回実行予定日時 : 2025/12/18 10:00
実行方法         : スケジュール
コード           : ***
実行開始日時     : 2025/12/17 10:30
実行終了日時     : 2025/12/17 10:32
```

---

### ajsname（名前解決）

ジョブネット名からパスを解決、またはその逆を行うコマンドです。

```cmd
ajsname [オプション] 名前またはパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-n` | パスから名前を取得 |
| `-p` | 名前からパスを取得 |

---

### ajslogprint（ログ出力）

ジョブの実行ログ情報を出力するコマンドです。

```cmd
ajslogprint [オプション] ジョブパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-o 出力ファイル` | ログの出力先ファイル |
| `-g 世代番号` | 取得する実行世代を指定 |

---

## ジョブ実行結果取得コマンド

### jpqjobget（ジョブ実行結果取得）

> ⚠️ **重要: QUEUEジョブ専用コマンド**
>
> `jpqjobget`は**QUEUEジョブ専用**のコマンドです。
> **PCジョブやUNIXジョブでは使用できません。**
>
> - **QUEUEジョブ**: `jpqjobsub`コマンドで投入されたジョブ（旧方式、現在はほとんど使用されない）
> - **PCジョブ/UNIXジョブ**: `ajsshow -i '%so'`（標準出力）や`-i '%rr'`（標準エラー）でファイルパスを取得し、直接読み取る
>
> 参考: https://itpfdoc.hitachi.co.jp/manuals/3021/30213b1920/AJSO0194.HTM

QUEUEジョブの実行結果（標準出力・標準エラー出力）を取得するコマンドです。

```cmd
jpqjobget [オプション] -j ジョブ番号
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-j ジョブ番号` | 対象のジョブ番号（1〜999999） |
| `-oso ファイル名` | 標準出力をファイルに出力 |
| `-ose ファイル名` | 標準エラー出力をファイルに出力 |
| `-di` | ジョブの詳細情報を出力 |
| `-h ホスト名` | エージェントホスト名を指定 |
| `-em マネージャ名` | 埋め込みDBマネージャ名を指定 |

**実行例**:
```cmd
rem 標準エラー出力を取得
jpqjobget -j 12345 -ose C:\temp\stderr.txt

rem 標準出力を取得
jpqjobget -j 12345 -oso C:\temp\stdout.txt

rem ジョブの詳細情報を取得
jpqjobget -j 12345 -di
```

**ジョブ番号の取得方法**:

ajsshowコマンドの`%I`フォーマット指示子で取得できます：
```cmd
ajsshow -F AJSROOT1 -g 1 -i '%I' /main_unit/jobgroup1/daily_batch/job1
```

**注意事項**:
- ジョブ番号は実行ごとに変わります
- 標準出力/エラーはジョブ終了後に取得可能
- 大きなファイルの場合はディスク容量に注意

---

### jpqjobshow（ジョブ詳細表示）

ジョブの詳細情報を表示するコマンドです。

```cmd
jpqjobshow [オプション] -j ジョブ番号
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-j ジョブ番号` | 対象のジョブ番号 |
| `-v` | 詳細表示 |
| `-h ホスト名` | エージェントホスト名を指定 |

---

## 定義操作コマンド

### ajsdefine（定義登録）

ジョブネットの定義を登録するコマンドです。

```cmd
ajsdefine [オプション] 定義ファイル
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-r` | 既存の定義を上書き |

**実行例**:
```cmd
ajsdefine -F AJSROOT1 jobnet_definition.txt
```

---

### ajsdelete（定義削除）

ジョブネットの定義を削除するコマンドです。

```cmd
ajsdelete [オプション] ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-R` | 配下のユニットも再帰的に削除 |
| `-f` | 確認なしで削除 |

**実行例**:
```cmd
rem 確認なしで削除
ajsdelete -F AJSROOT1 -f /main_unit/jobgroup1/old_batch
```

---

### ajsimport（インポート）

エクスポートした定義ファイルをインポートするコマンドです。

```cmd
ajsimport [オプション] -i インポートファイル 登録先パス
```

**実行例**:
```cmd
ajsimport -F AJSROOT1 -i exported_jobs.txt /main_unit/jobgroup1
```

---

### ajsexport（エクスポート）

ジョブネットの定義をファイルにエクスポートするコマンドです。

```cmd
ajsexport [オプション] -o 出力ファイル ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-o 出力ファイル` | エクスポート先ファイル |
| `-R` | 配下のユニットも再帰的にエクスポート |

**実行例**:
```cmd
ajsexport -F AJSROOT1 -o backup.txt -R /main_unit/jobgroup1
```

---

### ajscopy（コピー）

ジョブネットの定義をコピーするコマンドです。

```cmd
ajscopy [オプション] コピー元パス コピー先パス
```

**実行例**:
```cmd
ajscopy -F AJSROOT1 /main_unit/jobgroup1/daily_batch /main_unit/jobgroup2/daily_batch_copy
```

---

### ajschgdef（定義変更）

ジョブネットの定義を変更するコマンドです。

```cmd
ajschgdef [オプション] ジョブネットパス
```

---

### ajsbackup（バックアップ）

スケジューラーサービスの定義をバックアップするコマンドです。

```cmd
ajsbackup [オプション] -F スケジューラーサービス名 -d 出力ディレクトリ
```

---

### ajsrestore（リストア）

バックアップした定義をリストアするコマンドです。

```cmd
ajsrestore [オプション] -F スケジューラーサービス名 -d 入力ディレクトリ
```

---

## スケジュール管理コマンド

### ajsplan（実行予定表示）

ジョブネットの実行予定を表示するコマンドです。

```cmd
ajsplan [オプション] ジョブネットパス
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定 |
| `-d 日付` | 対象日を指定（YYYY/MM/DD形式） |
| `-n 件数` | 表示する予定の件数 |

**実行例**:
```cmd
rem 今日の実行予定を表示
ajsplan -F AJSROOT1 -d today /main_unit/jobgroup1

rem 今後10件の実行予定を表示
ajsplan -F AJSROOT1 -n 10 /main_unit/jobgroup1/daily_batch
```

---

### ajscalendar（カレンダー管理）

カレンダー情報を管理するコマンドです。

```cmd
ajscalendar [オプション] カレンダー名
```

**サブコマンド**:

| サブコマンド | 説明 |
|------------|------|
| `-add` | カレンダーを追加 |
| `-del` | カレンダーを削除 |
| `-show` | カレンダー情報を表示 |

---

### ajsschedule（スケジュール管理）

ジョブネットのスケジュールを管理するコマンドです。

```cmd
ajsschedule [オプション] ジョブネットパス
```

---

## システム管理コマンド

### ajsstart（サービス起動）

JP1/AJS3サービスを起動するコマンドです。

```cmd
ajsstart [オプション]
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | 起動するスケジューラーサービスを指定 |
| `-c` | コールドスタート |
| `-w` | ウォームスタート |

---

### ajsstop（サービス停止）

JP1/AJS3サービスを停止するコマンドです。

```cmd
ajsstop [オプション]
```

**主なオプション**:

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | 停止するスケジューラーサービスを指定 |
| `-f` | 強制停止 |
| `-n` | 計画停止（実行中のジョブ完了後） |

---

## ユニットタイプ一覧

JP1/AJS3で使用されるユニットタイプ（ty パラメーター）の一覧です。

### 基本ユニット

| ty値 | ユニット種別 | 説明 |
|------|-------------|------|
| **g** | ジョブグループ | ジョブネットを整理するフォルダ |
| **mg** | マネージャージョブグループ | マネージャー用ジョブグループ |
| **n** | ジョブネット | ジョブをまとめた実行単位 |
| **rn** | リカバリージョブネット | 異常時用のジョブネット |
| **rm** | リモートジョブネット | 別ホストのジョブネットを参照 |
| **mn** | マネージャージョブネット | マネージャー用ジョブネット |
| **nc** | ジョブネットコネクタ | ジョブネット間の連携 |

### ジョブタイプ

| ty値 | ユニット種別 | 説明 |
|------|-------------|------|
| **j** | PCジョブ/UNIXジョブ | 標準的なジョブ（バッチ、スクリプト） |
| **rj** | リカバリーPCジョブ | 異常時用のジョブ |
| **pj** | PCジョブ（互換用） | 旧バージョン互換 |
| **qj** | キュージョブ | キューに投入して実行 |
| **rq** | リカバリーキュージョブ | 異常時用のキュージョブ |

### 判定・分岐ジョブ

| ty値 | ユニット種別 | 説明 |
|------|-------------|------|
| **jdj** | 判定ジョブ | 条件分岐を行う |
| **rjdj** | リカバリー判定ジョブ | 異常時用の判定ジョブ |
| **orj** | ORジョブ | 複数の先行ジョブのいずれか終了で実行 |
| **rorj** | リカバリーORジョブ | 異常時用のORジョブ |

### 監視ジョブ

| ty値 | ユニット種別 | 説明 |
|------|-------------|------|
| **evwj** | JP1イベント受信監視ジョブ | JP1イベントを待機 |
| **flwj** | ファイル監視ジョブ | ファイルの作成・更新を監視 |
| **mlwj** | メール受信監視ジョブ | メール受信を監視 |
| **mqwj** | MQ受信監視ジョブ | MQメッセージを監視 |
| **mswj** | MSMQメッセージ受信監視ジョブ | MSMQメッセージを監視 |
| **lfwj** | ログファイル監視ジョブ | ログファイルを監視 |
| **ntwj** | Windows NT イベントログ監視ジョブ | イベントログを監視 |
| **tmwj** | 実行間隔制御ジョブ | 一定間隔で実行 |

### 送信・通知ジョブ

| ty値 | ユニット種別 | 説明 |
|------|-------------|------|
| **evsj** | JP1イベント送信ジョブ | JP1イベントを送信 |
| **mlsj** | メール送信ジョブ | メールを送信 |
| **mqsj** | MQ送信ジョブ | MQメッセージを送信 |
| **mssj** | MSMQメッセージ送信ジョブ | MSMQメッセージを送信 |
| **cmsj** | JP1/Cm2状態通知ジョブ | 状態を通知 |

### 電源制御ジョブ

| ty値 | ユニット種別 | 説明 |
|------|-------------|------|
| **pwlj** | ローカル電源制御ジョブ | ローカルマシンの電源制御 |
| **pwrj** | リモート電源制御ジョブ | リモートマシンの電源制御 |

### カスタム・拡張ジョブ

| ty値 | ユニット種別 | 説明 |
|------|-------------|------|
| **cj** | カスタムジョブ | カスタム定義のジョブ |
| **cpj** | カスタムPCジョブ | カスタム定義のPCジョブ |
| **fxj** | ファイル転送ジョブ | ファイルを転送 |
| **htpj** | HTTP接続ジョブ | HTTPリクエストを実行 |

### その他

| ty値 | ユニット種別 | 説明 |
|------|-------------|------|
| **hln** | 待ち合わせ条件 | 他ジョブネットの終了を待機 |
| **rc** | リカバリー制御 | リカバリー処理の制御 |
| **rr** | リモートジョブネット参照 | リモートジョブネットを参照 |

**注意**: 先頭に `r` が付くタイプ（rj, rn, revwj など）は「リカバリー」用ユニットを示します。

---

## 実行状態一覧

JP1/AJS3で表示される実行状態の一覧です。

### 日本語表示

| 状態 | 説明 |
|------|------|
| **実行中** | ジョブが現在実行されている |
| **正常終了** | ジョブが正常に終了した |
| **異常終了** | ジョブがエラーで終了した |
| **警告終了** | ジョブが警告付きで終了した |
| **警告検出終了** | 配下のジョブで警告が検出されて終了 |
| **強制終了** | ジョブが強制的に終了された |
| **保留中** | ジョブが保留状態で待機 |
| **開始時刻待ち** | 開始時刻になるまで待機 |
| **先行終了待ち** | 先行ジョブの終了を待機 |
| **実行待ち** | 実行リソースの空きを待機 |
| **キューイング** | キューに投入されて待機中 |
| **起動条件待ち** | 起動条件が満たされるのを待機 |
| **スキップ** | 実行がスキップされた |
| **状態不明** | 状態が不明 |
| **未実行終了** | 実行されずに終了した |
| **未計画** | 実行予定なし |

### 英語表示（コマンド出力）

| 状態 | 説明 |
|------|------|
| **Now running** | 実行中 |
| **Running + Warning** | 警告付きで実行中 |
| **Wait for start time** | 開始時刻待ち |
| **Wait for prev to end** | 先行終了待ち |
| **Waiting** | 待機中 |
| **Queuing** | キューイング中 |
| **Ended normally** | 正常終了 |
| **Ended with warning** | 警告終了 |
| **Ended abnormally** | 異常終了 |
| **Killed** | 強制終了 |
| **Unknown end status** | 終了状態不明 |
| **Being held** | 保留中 |
| **Bypassed** | スキップ |
| **Not scheduled to execute** | 実行予定なし |

---

## 共通オプション

ほとんどのajsコマンドで使用できる共通オプションです。

| オプション | 説明 |
|-----------|------|
| `-F スケジューラーサービス名` | スケジューラーサービスを指定（デフォルト: AJSROOT1） |
| `-h ホスト名` | JP1/AJS3マネージャーのホスト名を指定（リモート接続時） |
| `-u ユーザー名` | JP1ユーザー名を指定（リモート接続時） |
| `-p パスワード` | JP1パスワードを指定（リモート接続時） |
| `-?` | ヘルプを表示 |

---

## よく使うコマンド例

### 日常運用でよく使うパターン

#### 1. ジョブネットの即時実行

```cmd
rem 基本形
ajsentry -F AJSROOT1 /グループ名/ジョブネット名

rem リモート実行
ajsentry -h JP1サーバ -u jp1admin -p password -F AJSROOT1 /グループ名/ジョブネット名
```

#### 2. 保留中のジョブを解除して実行

```cmd
rem 保留解除
ajsrelease -F AJSROOT1 /グループ名/ジョブネット名

rem 即時実行
ajsentry -F AJSROOT1 /グループ名/ジョブネット名
```

#### 3. 異常終了したジョブの再実行

```cmd
rem ジョブネット全体を再実行
ajsrerun -F AJSROOT1 /グループ名/ジョブネット名

rem 特定のジョブから再実行
ajsrerun -F AJSROOT1 -b /グループ名/ジョブネット名/ジョブ名 /グループ名/ジョブネット名
```

#### 4. 実行状態の確認

```cmd
rem 基本的な状態確認
ajsstatus -F AJSROOT1 /グループ名/ジョブネット名

rem 詳細な実行結果
ajsshow -F AJSROOT1 -g 1 -E /グループ名/ジョブネット名

rem 配下のジョブも含めて確認
ajsshow -F AJSROOT1 -R -f '%J %T %S %R' /グループ名/ジョブネット名
```

#### 5. 異常終了時のエラー内容確認

**PCジョブ/UNIXジョブの場合**（ファイル直接読み取り）:
```cmd
rem 標準エラー出力ファイルパスを取得（単一指定、出力はシングルクォートで囲まれる）
ajsshow -F AJSROOT1 -g 1 -i %rr /グループ名/ジョブネット名/ジョブ名

rem 取得したファイルパスを直接参照（シングルクォートを除去して使用）
type "取得したファイルパス"
```

**QUEUEジョブの場合**（jpqjobget使用・現在はほとんど使用されない）:
```cmd
rem ジョブ番号を取得（UNIXジョブのみ有効）
ajsshow -F AJSROOT1 -g 1 -i %II /グループ名/ジョブネット名/ジョブ名

rem 標準エラー出力を取得
jpqjobget -j ジョブ番号 -ose C:\temp\stderr.txt
type C:\temp\stderr.txt
```

#### 6. ジョブ一覧の取得

```cmd
rem 全体のジョブ一覧
ajsprint -F AJSROOT1 -R /

rem 特定グループ配下のジョブネット一覧
ajsprint -F AJSROOT1 -R /グループ名/*
```

#### 7. 定義のバックアップ

```cmd
rem エクスポート
ajsexport -F AJSROOT1 -o backup_20251220.txt -R /グループ名

rem インポート（復元）
ajsimport -F AJSROOT1 -i backup_20251220.txt /グループ名
```

---

## トラブルシューティング

### よくある問題と解決方法

#### Q1. コマンドが見つからない

**原因**: PATHが通っていない

**解決方法**:
```cmd
rem Windowsの場合、以下のパスを確認
C:\Program Files\HITACHI\JP1AJS3\bin
C:\Program Files (x86)\HITACHI\JP1AJS3\bin

rem フルパスで実行
"C:\Program Files\HITACHI\JP1AJS3\bin\ajsentry.exe" -F AJSROOT1 /グループ名/ジョブネット名
```

#### Q2. 認証エラーが発生する

**エラー**: `KAVS4200-E 認証に失敗しました`

**解決方法**:
- JP1ユーザー名/パスワードを確認
- JP1/Baseでユーザーが登録されているか確認
- リモート接続の場合、ホスト名が正しいか確認

```cmd
rem 認証情報を明示的に指定
ajsentry -h jp1server -u jp1admin -p password -F AJSROOT1 /グループ名/ジョブネット名
```

#### Q3. ジョブネットが見つからない

**エラー**: `KAVS0505-E 指定したユニットは登録されていません`

**解決方法**:
- パスが正しいか確認（大文字/小文字に注意）
- スケジューラーサービス名が正しいか確認

```cmd
rem ジョブネットの一覧で確認
ajsprint -F AJSROOT1 -R / | findstr "ジョブネット名"
```

#### Q4. 保留中で実行できない

**エラー**: ジョブが保留状態のまま

**解決方法**:
```cmd
rem 保留解除
ajsrelease -F AJSROOT1 /グループ名/ジョブネット名

rem 配下も含めて保留解除
ajsrelease -F AJSROOT1 -R /グループ名/ジョブネット名
```

#### Q5. 異常終了の原因がわからない

**解決方法**:
```cmd
rem 1. 実行結果の詳細を確認
ajsshow -F AJSROOT1 -g 1 -E /グループ名/ジョブネット名

rem 2. 配下のジョブの状態を確認（1バイト版フォーマット指示子）
ajsshow -F AJSROOT1 -RE -f "%J %T %S %R" /グループ名/ジョブネット名

rem 3. 異常終了したジョブの標準エラー出力ファイルパスを取得
ajsshow -F AJSROOT1 -g 1 -i %rr /グループ名/ジョブネット名/異常終了ジョブ名

rem 4. 標準エラー出力を確認（取得したファイルパスからシングルクォートを除去して使用）
type "取得したファイルパス"
```

#### Q6. 実行中のジョブを止めたい

**解決方法**:
```cmd
rem ジョブネットを中断（実行中のジョブ完了後）
ajsintrpt -F AJSROOT1 /グループ名/ジョブネット名

rem 強制中断（即座に停止）
ajsintrpt -F AJSROOT1 -k /グループ名/ジョブネット名

rem 特定のジョブを強制終了
ajskilljob -F AJSROOT1 /グループ名/ジョブネット名/ジョブ名
```

---

## コマンドの配置場所

JP1/AJS3コマンドは通常、以下のパスにインストールされています：

**Windows**:
```
C:\Program Files\HITACHI\JP1AJS3\bin\
C:\Program Files (x86)\HITACHI\JP1AJS3\bin\
C:\Program Files\Hitachi\JP1AJS2\bin\
C:\Program Files (x86)\Hitachi\JP1AJS2\bin\
```

**Linux/UNIX**:
```
/opt/jp1ajs3/bin/
/opt/jp1ajs2/bin/
```

**環境変数**:
```cmd
rem PATHに追加する場合（Windows）
set PATH=%PATH%;C:\Program Files\HITACHI\JP1AJS3\bin

rem 永続化する場合はシステム環境変数に追加
```

---

## エラーメッセージ

JP1/AJS3コマンドの主なエラーメッセージ：

### 正常系

| メッセージID | 説明 |
|------------|------|
| KAVS1820-I | コマンドが正常終了しました |

### エラー系

| メッセージID | 説明 | 対処 |
|------------|------|------|
| KAVS0221-E | ジョブが異常終了しました | ジョブの実行ログを確認 |
| KAVS0222-E | ジョブネットが異常終了しました | 配下のジョブの状態を確認 |
| KAVS0505-E | 指定したユニットは登録されていません | パス名を確認 |
| KAVS1821-E | コマンドが異常終了しました | エラー詳細を確認 |
| KAVS4200-E | 認証に失敗しました | ユーザー名/パスワードを確認 |
| KAVS4201-E | ユーザーに権限がありません | JP1権限を確認 |
| KAVS4410-E | スケジューラーサービスが起動していません | サービスを起動 |
| KAVS4420-E | 接続先ホストに接続できません | ネットワークを確認 |

---

## 参考資料

- [JP1/AJS3 コマンドリファレンス](https://itpfdoc.hitachi.co.jp/manuals/3021/30213B1920/AJSO0131.HTM)
- [JP1/AJS3 運用ガイド](https://www.hitachi.co.jp/Prod/comp/soft1/manual/)
- [JP1 Version 13 製品マニュアル](https://itpfdoc.hitachi.co.jp/manuals/3021/30213D3200/JP1_manuals.html)
- [jpqjobget コマンドリファレンス](https://itpfdoc.hitachi.co.jp/manuals/3021/30213b1920/AJSO0194.HTM)
- [JP1/AJS3入門（アシスト）](https://www.ashisuto.co.jp/jp1blog/article/202201-ajs3.html)

---

**作成日**: 2025-12-18
**更新日**: 2025-12-23
